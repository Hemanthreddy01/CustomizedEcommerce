{"ast":null,"code":"import React,{useState}from\"react\";import axios from\"axios\";import\"./Signup.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Signup=_ref=>{let{setActiveCategory}=_ref;const[emailOrMobile,setEmailOrMobile]=useState(\"\");const[password,setPassword]=useState(\"\");const[confirmPassword,setConfirmPassword]=useState(\"\");const[errors,setErrors]=useState({});const[signupSuccess,setSignupSuccess]=useState(false);const validateForm=()=>{const newErrors={};// Email or Mobile Validation\nconst emailRegex=/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;// Simple email regex\nconst mobileRegex=/^\\d{10}$/;// Mobile number must be 10 digits\nif(!emailRegex.test(emailOrMobile)&&!mobileRegex.test(emailOrMobile)){newErrors.emailOrMobile=\"Enter a valid email or 10-digit mobile number.\";}// Password Validation\nconst passwordRegex=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d).{8,}$/;// At least 8 chars, 1 upper, 1 lower, 1 digit\nif(!passwordRegex.test(password)){newErrors.password=\"Password must be at least 8 characters long and include uppercase, lowercase, and a number.\";}// Confirm Password Validation\nif(password!==confirmPassword){newErrors.confirmPassword=\"Passwords do not match.\";}setErrors(newErrors);return Object.keys(newErrors).length===0;// Returns true if no errors\n};const handleSignup=async e=>{e.preventDefault();if(!validateForm())return;try{const response=await axios.post(\"http://localhost:5000/api/auth/signup\",{emailOrMobile,password});if(response.status===201){setSignupSuccess(true);alert(\"Signup successful! Please login.\");setActiveCategory(\"Login\");// Redirect to Login page\n}}catch(err){var _err$response,_err$response$data;const errorMessage=((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.error)||\"Signup failed. Please try again.\";setErrors({apiError:errorMessage});}};return/*#__PURE__*/_jsx(\"div\",{className:\"signup-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"signup-card\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"signup-heading\",children:\"Sign Up\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSignup,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"emailOrMobile\",className:\"form-label signup-label\",children:\"Email or Mobile Number\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:`form-control signup-input ${errors.emailOrMobile?\"is-invalid\":\"\"}`,id:\"emailOrMobile\",value:emailOrMobile,onChange:e=>setEmailOrMobile(e.target.value),placeholder:\"Enter email or mobile number\",required:true}),errors.emailOrMobile&&/*#__PURE__*/_jsx(\"div\",{className:\"invalid-feedback\",children:errors.emailOrMobile})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",className:\"form-label signup-label\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:`form-control signup-input ${errors.password?\"is-invalid\":\"\"}`,id:\"password\",value:password,onChange:e=>setPassword(e.target.value),placeholder:\"Enter password\",required:true}),errors.password&&/*#__PURE__*/_jsx(\"div\",{className:\"invalid-feedback\",children:errors.password})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"confirmPassword\",className:\"form-label signup-label\",children:\"Confirm Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:`form-control signup-input ${errors.confirmPassword?\"is-invalid\":\"\"}`,id:\"confirmPassword\",value:confirmPassword,onChange:e=>setConfirmPassword(e.target.value),placeholder:\"Confirm password\",required:true}),errors.confirmPassword&&/*#__PURE__*/_jsx(\"div\",{className:\"invalid-feedback\",children:errors.confirmPassword})]}),errors.apiError&&/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:errors.apiError}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-dark signup-button\",children:\"Sign Up\"})]}),signupSuccess&&/*#__PURE__*/_jsx(\"div\",{className:\"text-success mt-3\",children:\"Signup successful! Redirecting to login...\"}),/*#__PURE__*/_jsx(\"div\",{className:\"signup-login-link\",children:/*#__PURE__*/_jsxs(\"small\",{children:[\"Already have an account?\",\" \",/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-link p-0\",onClick:()=>setActiveCategory(\"Login\"),children:\"Log In\"})]})})]})});};export default Signup;","map":{"version":3,"names":["React","useState","axios","jsx","_jsx","jsxs","_jsxs","Signup","_ref","setActiveCategory","emailOrMobile","setEmailOrMobile","password","setPassword","confirmPassword","setConfirmPassword","errors","setErrors","signupSuccess","setSignupSuccess","validateForm","newErrors","emailRegex","mobileRegex","test","passwordRegex","Object","keys","length","handleSignup","e","preventDefault","response","post","status","alert","err","_err$response","_err$response$data","errorMessage","data","error","apiError","className","children","onSubmit","htmlFor","type","id","value","onChange","target","placeholder","required","onClick"],"sources":["C:/Users/lenovo/OneDrive/Desktop/Ecommerce/React-Project-main/Frontend/src/components/UserAuth/Signup.jsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport axios from \"axios\";\nimport \"./Signup.css\";\n\nconst Signup = ({ setActiveCategory }) => {\n  const [emailOrMobile, setEmailOrMobile] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\n  const [errors, setErrors] = useState({});\n  const [signupSuccess, setSignupSuccess] = useState(false);\n\n  const validateForm = () => {\n    const newErrors = {};\n\n    // Email or Mobile Validation\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/; // Simple email regex\n    const mobileRegex = /^\\d{10}$/; // Mobile number must be 10 digits\n    if (!emailRegex.test(emailOrMobile) && !mobileRegex.test(emailOrMobile)) {\n      newErrors.emailOrMobile = \"Enter a valid email or 10-digit mobile number.\";\n    }\n\n    // Password Validation\n    const passwordRegex = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d).{8,}$/; // At least 8 chars, 1 upper, 1 lower, 1 digit\n    if (!passwordRegex.test(password)) {\n      newErrors.password =\n        \"Password must be at least 8 characters long and include uppercase, lowercase, and a number.\";\n    }\n\n    // Confirm Password Validation\n    if (password !== confirmPassword) {\n      newErrors.confirmPassword = \"Passwords do not match.\";\n    }\n\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0; // Returns true if no errors\n  };\n\n  const handleSignup = async (e) => {\n    e.preventDefault();\n\n    if (!validateForm()) return;\n\n    try {\n      const response = await axios.post(\"http://localhost:5000/api/auth/signup\", {\n        emailOrMobile,\n        password,\n      });\n\n      if (response.status === 201) {\n        setSignupSuccess(true);\n        alert(\"Signup successful! Please login.\");\n        setActiveCategory(\"Login\"); // Redirect to Login page\n      }\n    } catch (err) {\n      const errorMessage = err.response?.data?.error || \"Signup failed. Please try again.\";\n      setErrors({ apiError: errorMessage });\n    }\n  };\n\n  return (\n    <div className=\"signup-container\">\n      <div className=\"signup-card\">\n        <h3 className=\"signup-heading\">Sign Up</h3>\n        <form onSubmit={handleSignup}>\n          {/* Email or Mobile */}\n          <div className=\"mb-3\">\n            <label htmlFor=\"emailOrMobile\" className=\"form-label signup-label\">\n              Email or Mobile Number\n            </label>\n            <input\n              type=\"text\"\n              className={`form-control signup-input ${errors.emailOrMobile ? \"is-invalid\" : \"\"}`}\n              id=\"emailOrMobile\"\n              value={emailOrMobile}\n              onChange={(e) => setEmailOrMobile(e.target.value)}\n              placeholder=\"Enter email or mobile number\"\n              required\n            />\n            {errors.emailOrMobile && (\n              <div className=\"invalid-feedback\">{errors.emailOrMobile}</div>\n            )}\n          </div>\n\n          {/* Password */}\n          <div className=\"mb-3\">\n            <label htmlFor=\"password\" className=\"form-label signup-label\">\n              Password\n            </label>\n            <input\n              type=\"password\"\n              className={`form-control signup-input ${errors.password ? \"is-invalid\" : \"\"}`}\n              id=\"password\"\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n              placeholder=\"Enter password\"\n              required\n            />\n            {errors.password && <div className=\"invalid-feedback\">{errors.password}</div>}\n          </div>\n\n          {/* Confirm Password */}\n          <div className=\"mb-3\">\n            <label htmlFor=\"confirmPassword\" className=\"form-label signup-label\">\n              Confirm Password\n            </label>\n            <input\n              type=\"password\"\n              className={`form-control signup-input ${errors.confirmPassword ? \"is-invalid\" : \"\"}`}\n              id=\"confirmPassword\"\n              value={confirmPassword}\n              onChange={(e) => setConfirmPassword(e.target.value)}\n              placeholder=\"Confirm password\"\n              required\n            />\n            {errors.confirmPassword && (\n              <div className=\"invalid-feedback\">{errors.confirmPassword}</div>\n            )}\n          </div>\n\n          {/* API Error */}\n          {errors.apiError && <p className=\"text-danger\">{errors.apiError}</p>}\n\n          <button type=\"submit\" className=\"btn btn-dark signup-button\">\n            Sign Up\n          </button>\n        </form>\n        {signupSuccess && (\n          <div className=\"text-success mt-3\">\n            Signup successful! Redirecting to login...\n          </div>\n        )}\n        <div className=\"signup-login-link\">\n          <small>\n            Already have an account?{\" \"}\n            <button\n              className=\"btn btn-link p-0\"\n              onClick={() => setActiveCategory(\"Login\")}\n            >\n              Log In\n            </button>\n          </small>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Signup;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}