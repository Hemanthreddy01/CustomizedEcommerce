{"ast":null,"code":"import React,{useState}from\"react\";import\"./Login.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Login(_ref){let{setIsLoggedIn,setUserName,setActiveCategory}=_ref;const[emailOrMobile,setEmailOrMobile]=useState(\"\");const[password,setPassword]=useState(\"\");const[errorMessage,setErrorMessage]=useState(\"\");// Track errors\nconst handleLogin=async e=>{e.preventDefault();setErrorMessage(\"\");// Clear previous errors\ntry{const response=await fetch(\"http://localhost:5000/api/auth/login\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({emailOrMobile,password})});if(!response.ok){const data=await response.json();setErrorMessage(data.error||\"Login failed. Please try again.\");return;}const data=await response.json();// Extract username and capitalize\nconst name=emailOrMobile.split(\"@\")[0];const capitalizedName=name.charAt(0).toUpperCase()+name.slice(1).toLowerCase();setUserName(capitalizedName);// Save login status and user details in localStorage\nlocalStorage.setItem(\"user\",JSON.stringify({emailOrMobile,name:capitalizedName}));setIsLoggedIn(true);setActiveCategory(\"home\");}catch(err){console.error(\"Error:\",err);setErrorMessage(\"An unexpected error occurred. Please try again.\");}};return/*#__PURE__*/_jsx(\"div\",{className:\"login-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"login-card\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"login-heading\",children:\"Log In\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleLogin,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"emailOrMobile\",className:\"form-label login-label\",children:\"Email or Mobile\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"emailOrMobile\",className:\"form-control\",value:emailOrMobile,onChange:e=>setEmailOrMobile(e.target.value),placeholder:\"Enter email or mobile number\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",className:\"form-label login-label\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",className:\"form-control\",value:password,onChange:e=>setPassword(e.target.value),placeholder:\"Enter password\",required:true})]}),errorMessage&&/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:errorMessage}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-dark w-100\",children:\"Log In\"})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"signup-link\",children:[\"Not registered?\",\" \",/*#__PURE__*/_jsx(\"span\",{className:\"text-primary\",onClick:()=>setActiveCategory(\"Signup\"),children:\"Sign up\"})]})]})});}export default Login;","map":{"version":3,"names":["React","useState","jsx","_jsx","jsxs","_jsxs","Login","_ref","setIsLoggedIn","setUserName","setActiveCategory","emailOrMobile","setEmailOrMobile","password","setPassword","errorMessage","setErrorMessage","handleLogin","e","preventDefault","response","fetch","method","headers","body","JSON","stringify","ok","data","json","error","name","split","capitalizedName","charAt","toUpperCase","slice","toLowerCase","localStorage","setItem","err","console","className","children","onSubmit","htmlFor","type","id","value","onChange","target","placeholder","required","onClick"],"sources":["C:/Users/lenovo/OneDrive/Desktop/Ecommerce/React-Project-main/Frontend/src/components/UserAuth/Login.jsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport \"./Login.css\";\n\nfunction Login({ setIsLoggedIn, setUserName, setActiveCategory }) {\n  const [emailOrMobile, setEmailOrMobile] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [errorMessage, setErrorMessage] = useState(\"\"); // Track errors\n\n  const handleLogin = async (e) => {\n    e.preventDefault();\n    setErrorMessage(\"\"); // Clear previous errors\n\n    try {\n      const response = await fetch(\"http://localhost:5000/api/auth/login\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ emailOrMobile, password }),\n      });\n\n      if (!response.ok) {\n        const data = await response.json();\n        setErrorMessage(data.error || \"Login failed. Please try again.\");\n        return;\n      }\n\n      const data = await response.json();\n\n      // Extract username and capitalize\n      const name = emailOrMobile.split(\"@\")[0];\n      const capitalizedName = name.charAt(0).toUpperCase() + name.slice(1).toLowerCase();\n      setUserName(capitalizedName);\n\n      // Save login status and user details in localStorage\n      localStorage.setItem(\"user\", JSON.stringify({ emailOrMobile, name: capitalizedName }));\n\n      setIsLoggedIn(true);\n      setActiveCategory(\"home\");\n    } catch (err) {\n      console.error(\"Error:\", err);\n      setErrorMessage(\"An unexpected error occurred. Please try again.\");\n    }\n  };\n\n  return (\n    <div className=\"login-container\">\n      <div className=\"login-card\">\n        <h3 className=\"login-heading\">Log In</h3>\n        <form onSubmit={handleLogin}>\n          <div className=\"mb-3\">\n            <label htmlFor=\"emailOrMobile\" className=\"form-label login-label\">\n              Email or Mobile\n            </label>\n            <input\n              type=\"text\"\n              id=\"emailOrMobile\"\n              className=\"form-control\"\n              value={emailOrMobile}\n              onChange={(e) => setEmailOrMobile(e.target.value)}\n              placeholder=\"Enter email or mobile number\"\n              required\n            />\n          </div>\n          <div className=\"mb-3\">\n            <label htmlFor=\"password\" className=\"form-label login-label\">\n              Password\n            </label>\n            <input\n              type=\"password\"\n              id=\"password\"\n              className=\"form-control\"\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n              placeholder=\"Enter password\"\n              required\n            />\n          </div>\n          {errorMessage && <p className=\"text-danger\">{errorMessage}</p>}\n          <button type=\"submit\" className=\"btn btn-dark w-100\">\n            Log In\n          </button>\n        </form>\n        <p className=\"signup-link\">\n          Not registered?{\" \"}\n          <span className=\"text-primary\" onClick={() => setActiveCategory(\"Signup\")}>\n            Sign up\n          </span>\n        </p>\n      </div>\n    </div>\n  );\n}\n\nexport default Login;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}